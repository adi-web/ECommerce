{% extends 'base.html' %} }

{% load static %}
{% block content %}
    <div class="card mb-3" style="max-width: 90%;">
  <div class="row g-0">
    <div class="col-md-4" style="height: 32vw">
      <img src={{ MEDIA_URL }}{{ detail_item.image }} class="img-fluid" alt="..." style="height:100%">
    </div>
    <div class="col-md-6">
      <div class="card-body">
        <h5 class="card-title"> {{ detail_item.name }}</h5>
        <p class="card-text">Description: {{ detail_item.description }}</p>
       <p class="card-text">Price: {{ detail_item.price }}</p>
          {% if itemcart %}
            <p><i class="bi bi-cart-check" style="font-size: xxx-large"></i> </p>
           <div class="input-group" style="width: 200px;">
          <span class="input-group-btn">
               <form action="{% url 'detail_item' detail_item.pk %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="{{ form.quantiyt_item.name }}" value="{{ itemcart|add:-1 }}">
                   <button class="btn btn-primary " style="margin-right: 25px" type="submit" value="Add to the cart"  ><i class="bi bi-dash-circle" style="font-size: x-large"></i></button>
                  </form>
          </span>
          <input type="text" name="quant[1]" class="form-control input-number" value="{{ itemcart }}" min="1" max="50">
          <span class="input-group-btn">
              <form action="{% url 'detail_item' detail_item.pk %}" method="post">
                    {% csrf_token %}

                  <input type="hidden" name="{{ form.quantiyt_item.name }}" value="{{ itemcart|add:1 }}">
                   <button class="btn btn-primary ms-4" type="submit"
                           value="Add to the cart"  ><i class="bi bi-plus-circle" style="font-size: x-large"></i></button>
                  </form>

          </span>
      </div>

      </div>
              {% else %}
       <form action="{% url 'detail_item' detail_item.pk %}" method="post">
           {% csrf_token %}
           <input class="btn btn-primary ms-4" type="submit" value="Add to the cart"  >
       </form>

         {% endif %}




    <h1 style="margin-top: 25px;margin-bottom: 10px">Comments:</h1>
    {% if user.is_authenticated %}
         <a href="{% url 'comment_create' detail_item.pk %}"><button class="btn btn-primary" style="margin-bottom: 10px">Add Comment</button></a>
    {% endif %}

    <ol class="list-group ">
        {% for c in comments %}
      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div class="ms-2 me-auto">
          <div class="fw-bold">Customer: {{ c.customer}}</div>
                Comment: {{ c.description }}
            {% if user.is_authenticated and user.pk == c.customer.pk %}
                <a href="{% url 'comment_delete' detail_item.pk c.pk %}">Delete</a>
            {% endif %}
        </div>
      </li>
        {% endfor %}
    </ol>

    </div>
    </div>
</div>
{% endblock %}



